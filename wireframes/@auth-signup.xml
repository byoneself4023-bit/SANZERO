<?xml version="1.0" encoding="UTF-8"?>
<!-- 회원가입 페이지 -->
<page name="auth-signup" title="회원가입 - SANZERO">
  <layout type="auth">
    <container class="min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8">
      <card class="max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-md">
        <!-- 로고 및 헤더 -->
        <header class="text-center">
          <logo class="mx-auto flex items-center justify-center">
            <icon name="shield-check" class="w-12 h-12 text-primary-600" />
          </logo>
          <heading level="1" class="mt-4 text-3xl font-bold text-gray-900">
            SANZERO
          </heading>
          <text class="mt-2 text-sm text-gray-600">
            산업재해 보상 서비스에 가입하세요
          </text>
        </header>

        <!-- 회원가입 진행 단계 -->
        <progress-steps class="flex justify-center mb-6">
          <step class="flex items-center">
            <step-number class="bg-primary-600 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium">
              1
            </step-number>
            <step-label class="ml-2 text-sm font-medium text-primary-600">기본정보</step-label>
          </step>
          <step-divider class="mx-4 w-8 border-t border-gray-300"></step-divider>
          <step class="flex items-center">
            <step-number class="bg-gray-300 text-gray-600 w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium">
              2
            </step-number>
            <step-label class="ml-2 text-sm font-medium text-gray-600">추가정보</step-label>
          </step>
        </progress-steps>

        <!-- 회원가입 폼 -->
        <form action="/auth/signup/form" method="POST" class="mt-8 space-y-6">
          <input type="hidden" name="csrf_token" value="{csrf_token}" />

          <!-- 1단계: 기본 정보 -->
          <form-step id="step-1" class="space-y-4">
            <!-- 사용자 유형 선택 -->
            <field>
              <label class="block text-sm font-medium text-gray-700 mb-2">사용자 유형</label>
              <radio-group name="user_type" required>
                <radio-option class="flex items-center p-3 border border-gray-300 rounded-md hover:bg-gray-50">
                  <radio-input name="user_type" value="general" />
                  <radio-content class="ml-3">
                    <title class="font-medium text-gray-900">일반 사용자</title>
                    <description class="text-sm text-gray-600">산업재해 보상 신청 및 상담</description>
                  </radio-content>
                </radio-option>

                <radio-option class="flex items-center p-3 border border-gray-300 rounded-md hover:bg-gray-50 mt-2">
                  <radio-input name="user_type" value="lawyer" />
                  <radio-content class="ml-3">
                    <title class="font-medium text-gray-900">노무사</title>
                    <description class="text-sm text-gray-600">전문 상담 서비스 제공</description>
                  </radio-content>
                </radio-option>
              </radio-group>
            </field>

            <!-- 이메일 -->
            <field>
              <label class="block text-sm font-medium text-gray-700">이메일 주소</label>
              <input
                name="email"
                type="email"
                autocomplete="email"
                required
                class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500"
                placeholder="your@example.com"
              />
            </field>

            <!-- 사용자명 -->
            <field>
              <label class="block text-sm font-medium text-gray-700">사용자명</label>
              <input
                name="username"
                type="text"
                autocomplete="username"
                required
                class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500"
                placeholder="홍길동"
              />
            </field>

            <!-- 비밀번호 -->
            <field>
              <label class="block text-sm font-medium text-gray-700">비밀번호</label>
              <input
                name="password"
                type="password"
                autocomplete="new-password"
                required
                class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500"
                placeholder="8자 이상, 영문+숫자+특수문자"
              />
              <password-strength class="mt-1">
                <strength-bar class="w-full bg-gray-200 rounded-full h-1">
                  <strength-fill class="bg-red-500 h-1 rounded-full w-0 transition-all"></strength-fill>
                </strength-bar>
                <strength-text class="text-xs text-gray-500 mt-1">비밀번호 강도: 약함</strength-text>
              </password-strength>
            </field>

            <!-- 비밀번호 확인 -->
            <field>
              <label class="block text-sm font-medium text-gray-700">비밀번호 확인</label>
              <input
                name="password_confirm"
                type="password"
                autocomplete="new-password"
                required
                class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500"
                placeholder="비밀번호를 다시 입력하세요"
              />
            </field>

            <!-- 연락처 -->
            <field>
              <label class="block text-sm font-medium text-gray-700">연락처</label>
              <input
                name="phone"
                type="tel"
                autocomplete="tel"
                class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500"
                placeholder="010-0000-0000"
              />
            </field>
          </form-step>

          <!-- 2단계: 추가 정보 (숨김 상태) -->
          <form-step id="step-2" class="space-y-4 hidden">
            <!-- 일반 사용자 추가 정보 -->
            <conditional condition="user_type_general">
              <field>
                <label class="block text-sm font-medium text-gray-700">생년월일</label>
                <input
                  name="birth_date"
                  type="date"
                  class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"
                />
              </field>

              <field>
                <label class="block text-sm font-medium text-gray-700">성별</label>
                <select
                  name="gender"
                  class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"
                >
                  <option value="">선택하세요</option>
                  <option value="male">남성</option>
                  <option value="female">여성</option>
                  <option value="other">기타</option>
                </select>
              </field>

              <field>
                <label class="block text-sm font-medium text-gray-700">업종</label>
                <select
                  name="industry_code"
                  class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"
                >
                  <option value="">선택하세요</option>
                  <option value="62">정보통신업</option>
                  <option value="25">금속가공업</option>
                  <option value="20">화학물질제조업</option>
                  <option value="41">건설업</option>
                  <option value="56">음식서비스업</option>
                  <option value="기타">기타</option>
                </select>
              </field>

              <field>
                <label class="block text-sm font-medium text-gray-700">직무/직책</label>
                <input
                  name="job_title"
                  type="text"
                  class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500"
                  placeholder="개발자, 생산직, 관리직 등"
                />
              </field>
            </conditional>

            <!-- 노무사 추가 정보 -->
            <conditional condition="user_type_lawyer">
              <field>
                <label class="block text-sm font-medium text-gray-700">면허번호</label>
                <input
                  name="license_number"
                  type="text"
                  required
                  class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500"
                  placeholder="LAW-2024-001"
                />
              </field>

              <field>
                <label class="block text-sm font-medium text-gray-700">사무소명</label>
                <input
                  name="office_name"
                  type="text"
                  required
                  class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500"
                  placeholder="○○ 노무법인"
                />
              </field>

              <field>
                <label class="block text-sm font-medium text-gray-700">사무소 주소</label>
                <textarea
                  name="office_address"
                  rows="2"
                  class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500"
                  placeholder="서울시 서초구 법조로 123, 7층"
                ></textarea>
              </field>

              <field>
                <label class="block text-sm font-medium text-gray-700">전문 분야</label>
                <checkbox-group name="specialties">
                  <checkbox-option class="flex items-center">
                    <checkbox name="specialties" value="산업재해" />
                    <label class="ml-2 text-sm text-gray-700">산업재해</label>
                  </checkbox-option>
                  <checkbox-option class="flex items-center">
                    <checkbox name="specialties" value="근로기준법" />
                    <label class="ml-2 text-sm text-gray-700">근로기준법</label>
                  </checkbox-option>
                  <checkbox-option class="flex items-center">
                    <checkbox name="specialties" value="산업안전" />
                    <label class="ml-2 text-sm text-gray-700">산업안전</label>
                  </checkbox-option>
                  <checkbox-option class="flex items-center">
                    <checkbox name="specialties" value="노동분쟁" />
                    <label class="ml-2 text-sm text-gray-700">노동분쟁</label>
                  </checkbox-option>
                </checkbox-group>
              </field>

              <field>
                <label class="block text-sm font-medium text-gray-700">경력 (년)</label>
                <input
                  name="experience_years"
                  type="number"
                  min="0"
                  max="50"
                  class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500"
                  placeholder="5"
                />
              </field>

              <field>
                <label class="block text-sm font-medium text-gray-700">상담료 (원)</label>
                <input
                  name="consultation_fee"
                  type="number"
                  min="0"
                  class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500"
                  placeholder="100000"
                />
              </field>
            </conditional>

            <!-- 주소 -->
            <field>
              <label class="block text-sm font-medium text-gray-700">주소</label>
              <textarea
                name="address"
                rows="2"
                class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500"
                placeholder="서울시 강남구 테스트동 123번지"
              ></textarea>
            </field>
          </form-step>

          <!-- 에러 메시지 -->
          <conditional condition="error_message">
            <error-alert class="rounded-md bg-red-50 p-4">
              <error-content class="flex">
                <icon name="x-circle" class="h-5 w-5 text-red-400" />
                <error-text class="ml-3 text-sm text-red-700">
                  {error_message}
                </error-text>
              </error-content>
            </error-alert>
          </conditional>

          <!-- 약관 동의 -->
          <terms-agreement class="space-y-3">
            <agreement-item class="flex items-start">
              <checkbox name="agree_terms" required />
              <label class="ml-2 text-sm text-gray-900">
                <link href="/terms" class="text-primary-600 hover:text-primary-500">이용약관</link>에 동의합니다 (필수)
              </label>
            </agreement-item>

            <agreement-item class="flex items-start">
              <checkbox name="agree_privacy" required />
              <label class="ml-2 text-sm text-gray-900">
                <link href="/privacy" class="text-primary-600 hover:text-primary-500">개인정보처리방침</link>에 동의합니다 (필수)
              </label>
            </agreement-item>

            <agreement-item class="flex items-start">
              <checkbox name="agree_marketing" />
              <label class="ml-2 text-sm text-gray-900">
                마케팅 정보 수신에 동의합니다 (선택)
              </label>
            </agreement-item>
          </terms-agreement>

          <!-- 폼 액션 버튼 -->
          <form-actions class="flex space-x-3">
            <button
              type="button"
              id="prev-btn"
              class="flex-1 py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 hidden"
            >
              이전
            </button>

            <button
              type="button"
              id="next-btn"
              class="flex-1 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"
            >
              다음
            </button>

            <button
              type="submit"
              id="submit-btn"
              class="flex-1 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 hidden"
            >
              가입하기
            </button>
          </form-actions>
        </form>

        <!-- 로그인 링크 -->
        <login-link class="text-center">
          <text class="text-sm text-gray-600">
            이미 계정이 있으신가요?
            <link href="/auth/login" class="font-medium text-primary-600 hover:text-primary-500">
              로그인
            </link>
          </text>
        </login-link>
      </card>
    </container>
  </layout>
</page>