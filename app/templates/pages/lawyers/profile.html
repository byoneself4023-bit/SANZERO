{% extends "base.html" %}

{% block title %}{{ lawyer.office_name.replace(' 노무사 사무소', '') }} 프로필 - SANZERO{% endblock %}

{% block content %}
<!-- 페이지 헤더 -->
<section class="bg-white border-b">
  <div class="max-w-4xl mx-auto px-4 py-8">
    <!-- Breadcrumb -->
    <nav class="flex mb-6" aria-label="Breadcrumb">
      <ol class="inline-flex items-center space-x-1 md:space-x-3">
        <li class="inline-flex items-center">
          <a href="/" class="text-gray-700 hover:text-blue-600">홈</a>
        </li>
        <li>
          <div class="flex items-center">
            <svg class="w-6 h-6 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
            </svg>
            <a href="/lawyers/search" class="text-gray-700 hover:text-blue-600">노무사 검색</a>
          </div>
        </li>
        <li>
          <div class="flex items-center">
            <svg class="w-6 h-6 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
            </svg>
            <span class="text-gray-500">노무사 프로필</span>
          </div>
        </li>
      </ol>
    </nav>

    <!-- 프로필 요약 -->
    <div class="bg-white rounded-lg shadow-sm border p-6">
      <div class="flex flex-col md:flex-row gap-6">
        <!-- 프로필 이미지 -->
        <div class="flex-shrink-0 text-center">
          <div class="w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mx-auto">
            <svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
            </svg>
          </div>
          {% if lawyer.is_verified %}
          <div class="mt-2 flex items-center justify-center">
            <svg class="w-4 h-4 text-green-500 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <span class="text-sm text-green-600 font-medium">인증됨</span>
          </div>
          {% endif %}
        </div>

        <!-- 기본 정보 -->
        <div class="flex-1">
          <div class="mb-4">
            <h1 class="text-2xl font-bold text-gray-900">{{ lawyer.office_name }}</h1>
            {% if lawyer.simplified_address %}
            <p class="text-lg text-gray-600">{{ lawyer.simplified_address }}</p>
            {% endif %}
            <p class="text-sm text-gray-500">면허번호: {{ lawyer.license_number }}</p>
          </div>

          <!-- 전문 분야 -->
          <div class="mb-4">
            <h3 class="text-sm font-medium text-gray-700 mb-2">전문 분야</h3>
            <div class="flex flex-wrap gap-2">
              {% for specialty in lawyer.specialties %}
              <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">{{ specialty }}</span>
              {% endfor %}
            </div>
          </div>

          <!-- 통계 -->
          <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
            <div class="text-center">
              <div class="text-2xl font-bold text-blue-600">{{ lawyer.experience_years }}년</div>
              <div class="text-sm text-gray-600">경력</div>
            </div>
            <div class="text-center">
              <div class="text-2xl font-bold text-green-600">{{ "%.0f"|format(lawyer.success_rate) }}%</div>
              <div class="text-sm text-gray-600">승소율</div>
            </div>
            <div class="text-center">
              <div class="text-2xl font-bold text-yellow-600">{{ "%.1f"|format(lawyer.rating) }}</div>
              <div class="text-sm text-gray-600">평점</div>
            </div>
            <div class="text-center">
              <div class="text-2xl font-bold text-purple-600">{{ lawyer.case_count }}</div>
              <div class="text-sm text-gray-600">상담 건수</div>
            </div>
          </div>
        </div>

        <!-- 상담 예약 버튼 -->
        <div class="flex flex-col gap-3 md:w-48">
          <a href="/lawyers/{{ lawyer.id }}/booking"
             class="bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors text-center font-medium">
            상담 예약하기
          </a>
          <div class="text-center">
            <div class="text-sm text-gray-600">상담료</div>
            <div class="text-lg font-semibold text-gray-900">{{ "{:,}".format(lawyer.consultation_fee) }}원</div>
          </div>

          <!-- 추가 서비스 정보 -->
          <div class="space-y-2 text-sm">
            {% if lawyer.is_online_consult %}
            <div class="flex items-center text-green-600">
              <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
              온라인 상담 가능
            </div>
            {% endif %}
            {% if lawyer.supports_sanzero_pay %}
            <div class="flex items-center text-blue-600">
              <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
              </svg>
              SANZERO 페이 지원
            </div>
            {% endif %}
            {% if lawyer.phone %}
            <div class="flex items-center text-gray-600">
              <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
              </svg>
              {{ lawyer.phone }}
            </div>
            {% endif %}
            {% if lawyer.website_url %}
            <div class="flex items-center text-blue-600">
              <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
              </svg>
              <a href="{{ lawyer.website_url }}" target="_blank" class="hover:underline">웹사이트</a>
            </div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<div class="max-w-4xl mx-auto px-4 py-8">
  <div class="max-w-5xl mx-auto">
    <!-- 메인 컨텐츠 -->
    <div class="space-y-8">
      <!-- 소개 -->
      <div class="bg-white rounded-lg shadow-sm border p-6">
        <h2 class="text-lg font-semibold mb-4">소개</h2>
        <div class="text-gray-700 leading-relaxed">
          {% if lawyer.user and lawyer.user.job_title %}
          <p class="mb-4">{{ lawyer.user.job_title }}</p>
          {% else %}
          <p class="mb-4">
            안녕하세요. {{ lawyer.specialties[0] if lawyer.specialties else '산업재해' }} 전문 노무사
            {{ lawyer.office_name.replace(' 노무사 사무소', '') }}입니다.
            {{ lawyer.experience_years }}년간 다양한 산업재해 사건을 담당하며 쌓은 경험을 바탕으로
            의뢰인의 권익 보호를 위해 최선을 다하고 있습니다.
          </p>
          <p class="mb-4">
            복잡한 의료 기록 분석과 보상금 산정에 대한 전문성을 인정받고 있으며,
            의뢰인과의 소통을 중시하여 이해하기 쉬운 설명과 투명한 진행 과정으로 신뢰받는 노무사가 되겠습니다.
          </p>
          {% endif %}

          {% if lawyer.fee_policy %}
          <div class="mt-6 p-4 bg-blue-50 rounded-lg">
            <h3 class="font-medium text-blue-900 mb-2">💰 수임료 정책</h3>
            <p class="text-blue-800 text-sm">{{ lawyer.fee_policy }}</p>
          </div>
          {% endif %}

          {% if lawyer.case_difficulty %}
          <div class="mt-4 p-4 bg-gray-50 rounded-lg">
            <h3 class="font-medium text-gray-900 mb-2">🎯 전문 사건 난이도</h3>
            <p class="text-gray-700 text-sm">
              <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium
                {% if lawyer.case_difficulty == '상' %}bg-red-100 text-red-800
                {% elif lawyer.case_difficulty == '중상' %}bg-orange-100 text-orange-800
                {% elif lawyer.case_difficulty == '중' %}bg-yellow-100 text-yellow-800
                {% elif lawyer.case_difficulty == '중하' %}bg-green-100 text-green-800
                {% else %}bg-blue-100 text-blue-800{% endif %}">
                {{ lawyer.case_difficulty }}급 사건 전문
              </span>
              -
              {% if lawyer.case_difficulty == '상' %}
              복잡하고 어려운 고난이도 사건 전문
              {% elif lawyer.case_difficulty == '중상' %}
              어려운 사건에 대한 풍부한 경험
              {% elif lawyer.case_difficulty == '중' %}
              일반적인 산재 사건 전문
              {% elif lawyer.case_difficulty == '중하' %}
              기본적인 산재 사건 처리
              {% else %}
              초급 수준의 사건 처리
              {% endif %}
            </p>
          </div>
          {% endif %}
        </div>
      </div>

      <!-- 전문 분야 상세 -->
      <div class="bg-white rounded-lg shadow-sm border p-6">
        <h2 class="text-lg font-semibold mb-4">전문 분야 상세</h2>
        <div class="space-y-4">
          {% for specialty in lawyer.specialties %}
          <div class="border-l-4 border-blue-500 pl-4">
            <h3 class="font-medium text-blue-900 mb-2">{{ specialty }}</h3>
            <p class="text-gray-700 text-sm">
              {% if specialty == '산업재해' %}
              업무상 재해 인정, 보상금 신청, 이의신청 등 산재보험 전반에 대한 업무
              {% elif specialty == '근로기준법' %}
              임금체불, 부당해고, 근로조건 위반 등 근로기준법 관련 분쟁 해결
              {% elif specialty == '산업안전' %}
              안전보건 의무 위반, 안전사고 예방, 작업환경 개선 등
              {% elif specialty == '직업병' %}
              직업성 질환 인정, 장해등급 판정, 요양급여 신청 등
              {% else %}
              {{ specialty }} 관련 전문 업무
              {% endif %}
            </p>
            <p class="text-xs text-gray-500 mt-1">
              경력 {{ lawyer.experience_years }}년 | 성공률 {{ "%.0f"|format(lawyer.success_rate) }}%
            </p>
          </div>
          {% endfor %}
        </div>
      </div>

      <!-- 주요 성과 -->
      <div class="bg-white rounded-lg shadow-sm border p-6">
        <h2 class="text-lg font-semibold mb-4">주요 성과</h2>
        <div class="space-y-4">
          <div class="flex items-start p-4 bg-gray-50 rounded-lg">
            <svg class="w-6 h-6 text-yellow-500 mt-1 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path>
            </svg>
            <div>
              <h3 class="font-medium text-gray-900">높은 성공률 유지</h3>
              <p class="text-sm text-gray-600 mt-1">
                {{ "%.0f"|format(lawyer.success_rate) }}%의 높은 승소율로 의뢰인들의 신뢰를 받고 있습니다.
              </p>
            </div>
          </div>

          {% if lawyer.is_verified %}
          <div class="flex items-start p-4 bg-gray-50 rounded-lg">
            <svg class="w-6 h-6 text-blue-500 mt-1 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <div>
              <h3 class="font-medium text-gray-900">SANZERO 인증 노무사</h3>
              <p class="text-sm text-gray-600 mt-1">
                엄격한 심사를 통과한 인증된 노무사로 신뢰할 수 있는 서비스를 제공합니다.
              </p>
            </div>
          </div>
          {% endif %}

          {% if lawyer.rating >= 4.5 %}
          <div class="flex items-start p-4 bg-gray-50 rounded-lg">
            <svg class="w-6 h-6 text-green-500 mt-1 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path>
            </svg>
            <div>
              <h3 class="font-medium text-gray-900">우수한 고객 만족도</h3>
              <p class="text-sm text-gray-600 mt-1">
                {{ "%.1f"|format(lawyer.rating) }}/5.0의 높은 평점으로 고객들의 만족도가 매우 높습니다.
              </p>
            </div>
          </div>
          {% endif %}
        </div>
      </div>

      <!-- 고객 후기 -->
      <div class="bg-white rounded-lg shadow-sm border p-6">
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-lg font-semibold">고객 후기</h2>
          <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm">{{ lawyer.total_reviews }}건</span>
        </div>

        {% if lawyer.total_reviews > 0 %}
        <div class="space-y-4">
          <!-- 샘플 리뷰들 -->
          <div class="border-b pb-4">
            <div class="flex items-center justify-between mb-2">
              <div>
                <span class="font-medium text-gray-900">박○○</span>
                <span class="text-sm text-gray-500 ml-2">작업장 안전사고</span>
              </div>
              <div class="flex items-center">
                <span class="text-yellow-400 mr-1">★★★★★</span>
                <span class="text-sm text-gray-600">5.0</span>
              </div>
            </div>
            <p class="text-gray-700 text-sm">
              복잡한 사건이었는데 차근차근 설명해주시고 끝까지 책임져주셔서 좋은 결과를 얻을 수 있었습니다.
              전문성과 함께 따뜻한 마음씨까지 느낄 수 있었어요.
            </p>
            <span class="text-xs text-gray-500 mt-2 block">2024.01.15</span>
          </div>

          <div class="border-b pb-4">
            <div class="flex items-center justify-between mb-2">
              <div>
                <span class="font-medium text-gray-900">이○○</span>
                <span class="text-sm text-gray-500 ml-2">산업재해 보상</span>
              </div>
              <div class="flex items-center">
                <span class="text-yellow-400 mr-1">★★★★★</span>
                <span class="text-sm text-gray-600">5.0</span>
              </div>
            </div>
            <p class="text-gray-700 text-sm">
              의료 기록이 복잡해서 걱정했는데, 꼼꼼히 검토해주시고 최적의 전략을 세워주셨습니다.
              예상보다 훨씬 좋은 결과였어요!
            </p>
            <span class="text-xs text-gray-500 mt-2 block">2023.12.20</span>
          </div>

          <div>
            <div class="flex items-center justify-between mb-2">
              <div>
                <span class="font-medium text-gray-900">최○○</span>
                <span class="text-sm text-gray-500 ml-2">근로기준법 위반</span>
              </div>
              <div class="flex items-center">
                <span class="text-yellow-400 mr-1">★★★★☆</span>
                <span class="text-sm text-gray-600">4.5</span>
              </div>
            </div>
            <p class="text-gray-700 text-sm">
              처음 상담부터 결과까지 모든 과정이 투명했고, 진행 상황을 수시로 알려주셔서 안심할 수 있었습니다.
            </p>
            <span class="text-xs text-gray-500 mt-2 block">2023.11.08</span>
          </div>
        </div>
        {% else %}
        <p class="text-gray-500 text-center py-4">아직 등록된 후기가 없습니다.</p>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}