{% extends "base.html" %}

{% block title %}{{ precedent.get('summarized_title', 'Unknown Case') }} - SANZERO{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <!-- í˜ì´ì§€ í—¤ë” -->
    <div class="mb-8">
        <div class="flex items-center mb-4">
            <a href="/analysis/precedent" class="text-gray-500 hover:text-gray-700 mr-4">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                </svg>
            </a>
            <div class="flex-1">
                <h1 class="text-3xl font-bold text-gray-900 mb-2">{{ precedent.get('title', 'Unknown Title') }}</h1>
                <div class="flex items-center space-x-4 text-sm text-gray-600">
                    <span><strong>ë²•ì›:</strong> {{ precedent.get('court', 'Unknown Court') }}</span>
                    <span><strong>ë‚ ì§œ:</strong> {{ precedent.get('date', 'Unknown Date') }}</span>
                    <span><strong>Case ID:</strong> {{ precedent.get('case_id', 'Unknown ID') }}</span>
                </div>
            </div>
        </div>
    </div>

    <div class="grid lg:grid-cols-4 gap-8">
        <!-- ë©”ì¸ íŒë¡€ ë‚´ìš© -->
        <div class="lg:col-span-3">
            <!-- ê¸°ë³¸ ì •ë³´ ì¹´ë“œ -->
            <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                <h2 class="text-xl font-bold text-gray-900 mb-4">ğŸ“‹ ê¸°ë³¸ ì •ë³´</h2>

                <div class="grid md:grid-cols-2 gap-4 mb-4">
                    <div class="space-y-3">
                        <div>
                            <span class="font-medium text-gray-700">ì‚¬ê±´ë²ˆí˜¸:</span>
                            <span class="text-gray-900">{{ precedent.get('case_number', 'ì‚¬ê±´ë²ˆí˜¸ ë¯¸ìƒ') }}</span>
                        </div>
                        <div>
                            <span class="font-medium text-gray-700">ì›ê³ :</span>
                            <span class="text-gray-900">{{ precedent.get('plaintiff', 'ì›ê³  ì •ë³´ ë¯¸ìƒ') }}</span>
                        </div>
                        <div>
                            <span class="font-medium text-gray-700">í”¼ê³ :</span>
                            <span class="text-gray-900">{{ precedent.get('defendant', 'í”¼ê³  ì •ë³´ ë¯¸ìƒ') }}</span>
                        </div>
                    </div>
                    <div class="space-y-3">
                        <div>
                            <span class="font-medium text-gray-700">ì‚¬ê³  ìœ í˜•:</span>
                            <span class="inline-block bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm">
                                {% if precedent.get('category') == 'ì¶”ë½ì‚¬ê³ ' %}ğŸªœ
                                {% elif precedent.get('category') == 'ê¸°ê³„ì‚¬ê³ ' %}âš™ï¸
                                {% elif precedent.get('category') == 'í™”ì¬ì‚¬ê³ ' %}ğŸ”¥
                                {% elif precedent.get('category') == 'êµí†µì‚¬ê³ ' %}ğŸš—
                                {% elif precedent.get('category') == 'ì¤‘ë…ì‚¬ê³ ' %}â˜£ï¸
                                {% elif precedent.get('category') == 'ê°ì „ì‚¬ê³ ' %}âš¡
                                {% else %}âš¡{% endif %} {{ precedent.get('category', 'ê¸°íƒ€ ì‚¬ê³ ') }}
                            </span>
                        </div>
                        <div>
                            <span class="font-medium text-gray-700">ë‚´ìš© ê¸¸ì´:</span>
                            <span class="text-gray-900">{{ "{:,}".format(precedent.get('content_length', 0)) }} ì</span>
                        </div>
                    </div>
                </div>

                <!-- í‚¤ì›Œë“œ íƒœê·¸ -->
                {% if precedent.get('keywords') %}
                <div class="mb-4">
                    <span class="font-medium text-gray-700 block mb-2">ì£¼ìš” í‚¤ì›Œë“œ:</span>
                    <div class="flex flex-wrap gap-2">
                        {% for keyword in precedent.get('keywords', []) %}
                        <span class="inline-block bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">
                            {{ keyword }}
                        </span>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
            </div>

            <!-- íŒë¡€ ì „ë¬¸ ë‚´ìš© -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-xl font-bold text-gray-900 mb-4">ğŸ“„ íŒë¡€ ì „ë¬¸</h2>

                <div class="prose max-w-none">
                    <div class="precedent-full-content text-gray-700 leading-relaxed whitespace-pre-line break-words">
                        {{ precedent.get('full_content', 'íŒë¡€ ë‚´ìš©ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.') }}
                    </div>
                </div>
            </div>
        </div>

        <!-- ì‚¬ì´ë“œë°” -->
        <div class="lg:col-span-1">

            <!-- íŒë¡€ í†µê³„ -->
            <div class="bg-gray-50 border border-gray-200 rounded-lg p-6">
                <h3 class="text-lg font-semibold text-gray-800 mb-3">ğŸ“Š íŒë¡€ ì •ë³´</h3>
                <div class="space-y-2 text-sm">
                    <div class="flex justify-between">
                        <span class="text-gray-600">ë°ì´í„° ì¸ë±ìŠ¤:</span>
                        <span class="text-gray-900 font-medium">{{ precedent.get('index', 'N/A') }}</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">í…ìŠ¤íŠ¸ ê¸¸ì´:</span>
                        <span class="text-gray-900 font-medium">{{ "{:,}".format(precedent.get('content_length', 0)) }}ì</span>
                    </div>
                    {% if precedent.get('keywords') %}
                    <div class="flex justify-between">
                        <span class="text-gray-600">í‚¤ì›Œë“œ ìˆ˜:</span>
                        <span class="text-gray-900 font-medium">{{ precedent.get('keywords', [])|length }}ê°œ</span>
                    </div>
                    {% endif %}
                </div>

                <div class="mt-4 pt-4 border-t border-gray-300">
                    <div class="text-xs text-gray-500">
                        <p>ì´ íŒë¡€ëŠ” SANZERO AI ì‹œìŠ¤í…œì—ì„œ</p>
                        <p>ìë™ìœ¼ë¡œ ë¶„ë¥˜ ë° ë¶„ì„ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// ============================================================================
// ğŸš€ Precedent Detail JavaScript Functions
// ============================================================================


function consultLawyer() {
    // ë…¸ë¬´ì‚¬ ìƒë‹´ í˜ì´ì§€ë¡œ ì´ë™
    window.location.href = '/lawyers';
}

function calculateCompensation() {
    // ë³´ìƒê¸ˆ ê³„ì‚° í˜ì´ì§€ë¡œ ì´ë™
    window.location.href = '/compensation/calculate';
}

// í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ ì‹œ
document.addEventListener('DOMContentLoaded', function() {
    console.log('ğŸ“„ Precedent detail page loaded:', '{{ precedent.get("case_id", "unknown") }}');

    // ê¸´ í…ìŠ¤íŠ¸ì˜ ê°€ë…ì„±ì„ ìœ„í•œ ë™ì  ì¡°ì •
    const content = document.querySelector('.precedent-full-content');
    if (content && content.textContent.length > 5000) {
        content.style.fontSize = '0.9rem';
        content.style.lineHeight = '1.7';
    }

});
</script>

<style>
/* íŒë¡€ ìƒì„¸ í˜ì´ì§€ ì „ìš© ìŠ¤íƒ€ì¼ */
.precedent-full-content {
    font-family: 'Noto Sans KR', system-ui, -apple-system, sans-serif;
    line-height: 1.8;
    word-spacing: 0.1em;
    letter-spacing: 0.03em;
    text-align: justify;
    text-justify: inter-word;
}

.prose {
    max-width: none;
}

/* ë°˜ì‘í˜• ì¡°ì • */
@media (max-width: 768px) {
    .precedent-full-content {
        font-size: 0.875rem;
        line-height: 1.6;
    }
}

/* ì¸ì‡„ ìŠ¤íƒ€ì¼ */
@media print {
    .precedent-full-content {
        font-size: 12pt;
        line-height: 1.6;
        color: black;
    }

    .bg-blue-50, .bg-gray-50 {
        background-color: #f8f9fa !important;
    }
}
</style>

{% endblock %}